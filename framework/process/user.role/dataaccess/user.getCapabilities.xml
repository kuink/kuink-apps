<?xml version='1.0'?>
<Method>
    <Doc>
        Get the roles of a given user
    </Doc>
    <Params>
        <Param name="id_user"/>
    </Params>
    <Body>
        <Sql>
            <![CDATA[        
                SELECT
                    c.id,
                    c.code 
                FROM 
                    fw_user u
                    INNER JOIN fw_allocation a ON (a.id_user = u.id)
                    INNER JOIN fw_role r ON (r.id = a.id_role)
                    INNER JOIN fw_role_capability rc ON (rc.id_role = r.id)
                    INNER JOIN fw_capability c ON (c.id = rc.id_capability)
                WHERE  
                  u.id = {param->id_user}
                ORDER BY  
                  c.code
        ]]>
        </Sql>
    </Body>
</Method>
