<?xml version='1.0'?>
<Method>
    <Doc>
        Get the roles of a given user
    </Doc>
    <Params>
        <Param name="id_person"/>
        <Param name="id_company"/>
    </Params>
    <Body>
        <Sql>
            <![CDATA[   
                SELECT
                  r.id,
                  r.code  
                FROM   
                  fw_user u  
                  INNER JOIN fw_user_company uc ON (uc.id_user = u.id AND uc.id_person = {param->id_person} AND uc.id_company = {param->id_company})  
                  INNER JOIN fw_allocation a ON (a.id_user = u.id)  
                  INNER JOIN fw_role r ON (r.id = a.id_role) 
                ORDER BY  
                  r.code                 
        ]]>
        </Sql>
    </Body>
</Method>
