<?xml version="1.0" encoding="UTF-8"?>
<Method>
  <Doc>
    Search users by category code
  </Doc>
  <Params>
    <Param name="capability_code" />
  </Params>
  <Body>
    <Sql>
      <XSql>
        <XSelect>
          <XField>
            u.*
          </XField>
        </XSelect>
        <XFrom>
          <XTable>
            fw_capability c
            INNER JOIN fw_role_capability rc ON (rc.id_capability = c.id)
            INNER JOIN fw_role r ON (r.id = rc.id_role)
            INNER JOIN fw_allocation a ON (a.id_role = r.id)
            INNER JOIN fw_user u ON (u.id = a.id_user)
          </XTable>
        </XFrom>
        <XWhere>
          <XCondition>c.code = '{param->capability_code}'</XCondition>
        </XWhere>
      </XSql>
    </Sql>
  </Body>
</Method>