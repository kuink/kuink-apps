<?xml version="1.0" encoding="UTF-8"?>
<Method>
	<Doc>Check if the user has the given role</Doc>
	<Params>
		<Param name="id_person"/>
		<Param name="code"/>
	</Params>
	<Body>
		<Load>
			<XSql>
				<XSelect>
					<XField>
						<![CDATA[
							r.id,
							r.code
						]]>
          </XField>
				</XSelect>
				<XFrom>
					<XTable>
						<![CDATA[
							fw_user u
							INNER JOIN fw_user_company uc ON (uc.id_user = u.id AND uc.id_person = '{param->id_person}')  
							INNER JOIN fw_allocation a ON (a.id_user = u.id)
							INNER JOIN fw_role r ON (r.id = a.id_role)
						]]>
					</XTable>
				</XFrom>
				<XWhere>
					<XCondition><![CDATA[  r.code = {param->code}  ]]></XCondition>
				</XWhere>
			</XSql>
		</Load>
	</Body>
</Method>