<?xml version="1.0" encoding="UTF-8"?>
<Node>
  <Permissions>
  </Permissions>
  <Doc lang="pt-PT">
  </Doc>
  <Libraries>
  </Libraries>
  <Configuration/>
  <Params>
    <Param name="code"/>
  </Params>
  <Screens>
    <Screen id="scrMain" doc="Main screen">
      <HtmlContainer name="htmlCallout"/>
      <Repeatable name="rptItems" template="menuBox" cols="4" type="type" icon="icon" label="name" url="url" tooltip="description"/>
    </Screen>
  </Screens>
  <Actions>
    <Action name="init" screen="scrMain">
      <Var name="personData">
        <Call library="gecol.core,person,api" function="get">
          <Param name="id"><Var name="USER" key="id" /></Param>
        </Call>
      </Var>      
      <Var name="code">
        <IsNull>
          <Param><Var name="PARAMS" key="code"/></Param>
          <Param><Var name="personData" key="person_type_code"/></Param>
        </IsNull>
      </Var>
      <If condition="$code=='STD'">
        <Then>
          <Control method="bind" object="htmlCallout">
              <Param><String>
                <![CDATA[
                  <div class="container">
                    <div class="row">
                      <div class="col-lg-12">
                          <img src="http://localhost/moodle/mod/neon/stream.php?type=resource&kid=framework.menu,panel,STDCallout.png"/>
                      </div>
                    </div>                                
                  </div>
                ]]>
              </String></Param>
          </Control>
        </Then>
      </If>
      <Var name="menuItems">
        <Call library="framework,menu,api" function="getItemsByMenuCode">
          <Param name="code"><Var name="code"/></Param>
        </Call>
      </Var>
      <Control method="bind" object="rptItems">
        <Param><Var name="menuItems"/></Param>
      </Control>
    </Action>
  </Actions>
</Node>
